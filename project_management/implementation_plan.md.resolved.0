# Refresh Ingredients Table from JSON

Clear the existing `ingredients` table and repopulate it using over 20 JSON files from `C:\Foodypedia\JSON des ingredients`. Each file represents a category. Images will be linked from `C:\Foodypedia\static\ingredients_pics`.

## Proposed Changes

### [Ingredients App]

#### [NEW] [refresh_ingredients.py](file:///C:/Foodypedia/apps/ingredients/management/commands/refresh_ingredients.py)
Create a new management command to:
1.  **Empty Tables**: Delete all records from `Ingredient`, `IngredientImage`, and (optionally) `IngredientCategory` / `FunctionalCategory` if they are to be rebuilt. *Note: I will only delete categories if they are truly redundant, but clearing `Ingredient` is the primary goal.*
2.  **Iterate JSON Files**: Scan `C:\Foodypedia\JSON des ingredients`.
3.  **Process Categories**: Use the filename as the `IngredientCategory` name.
4.  **Parse Ingredients**:
    - Create/Update `Ingredient` entries.
    - Map fields: `name`, `scientific_name`, `description`, `seasonality`, `buying_guide`, `storage_guide`, `prep_guide`, `nutrition_info`, `texture`, `specific_data`, `tags`.
    - Link `Glossaire` if `glossary_term` exists.
    - Assign `main_image` by searching in `static/ingredients_pics`.
    - create `IngredientImage` for each item in `variant_images`.
5.  **Logging**: Provide clear output of imported items and missing images.

## Verification Plan

### Automated Verification
- Run the command: `python manage.py refresh_ingredients`
- Verify the counts of ingredients in the database against the JSON files.
- Check for any integrity errors or missing mandatory fields.

### Manual Verification
- Log into the Django Admin and inspect a few ingredients from different categories to ensure all fields (including JSON fields and images) are correctly populated.
- Verify that images are displayed correctly in the frontend (if accessible).
